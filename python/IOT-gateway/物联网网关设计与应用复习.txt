一、物联网网关架构图
架构图说明：
   （1）硬件层
    硬件层包含有控制器、传感器、执行器等硬件设备，它的作用是采集现实世界的数据
和执行上层的反馈控制。
   （2）协调层/网关
    协调层包含有物联网网关或PC主机，它起着中间件的作用，用于连接本地的所有控制
器或传感器节点，并负责与网络进行通信。
   （3）服务层
    服务层包含有物联网协议处理模块、数据处理模块和数据发送模块。服务层是物联网
系统的中枢神经，主要处理数据接收、数据存储及数据发送。
   （4）应用程序层
    应用程序层包含有终端应用、浏览器应用和移动设备应用等，提供物联网系统的用户
界面及用户操作。

网关最主流是操作系统：Linux操作系统
设备的组网方式――1对1；1对N；N对N
工业物联网有线协议――RS-232、RS-485

设备反馈――可视化；通知；控制


物联网服务器的主要功能（接收、处理、保存数据）


物联网数据分析的常用方法：
（1）基于采集的可视化分析
（2）基于高级分析技术的发现分析
（3）预测分析

物联网系统的开发流程：
（1）系统规划阶段 （2）验证假设阶段（3）系统开发阶段（4）系统交付阶段（5）维护应用阶段 


智慧大棚架构：
空气温湿度传感器、土壤湿度传感器、光照传感器、二氧化碳传感器等传感器，通过RS-485总线与网关设备连接及通信。


ESP8266编程语言-MicroPython（编译语言?）/C/Lua/Javascript
开源免费
基于Python3.0
Python（元组、列表）哪个元素可以修改？
Boot.py文件 ,main.py文件
延时函数


ESP8266(SOC――System On Chip)>MCU
ESP8266模拟管脚A0
CH340驱动程序
WIFI模式： WIFI AP, WIFI STA, WIFI AP/STA混合模式 
测量最小电压： 0.00322V
睡眠模式：深度睡眠、调制睡眠Modem-sleep、轻度睡眠light-sleep 



二、传感器读取
模拟传感器(光敏传感器)读取,A0口输入；machine.ADC(0).read()
数字传感器DHT11读取/单总线协议；DHT11系列-DHT11,DHT21,DHT22
传感器节点是集无线通信装置为一体的传感器设备。



三、UDP协议/TCP协议
UDP协议设置参数

TCP协议设置参数


HTTP/RESTful通信方式-GET/POST/PUT/DELETE


四、JSON数据读取



五、MQTT协议
基于TCP协议；发布/订阅

MQTT角色：
（1）服务器充当中介者的作用，负责处理发布者和订阅者之间的消息传递。
（2）发布者承担主题实现，向服务器发送主题消息。
（3）订阅者向服务器订阅主题，接收服务器转发的主题消息。
（4）三者之间通过QoS、Retain、Will、Clear Session来控制消息的发送及接收。

发布：
（1）连接WIFI热点
（2）建立MQTTClient客户端对象）
（3）连接MQTT服务器）
（4）发布主题消息

订阅:
（1）连接WIFI热点
（2）建立MQTTClient客户端对象
（3）设定接收MQTT信息的回调函数
（4）连接MQTT服务器
（5）订阅主题
（6）检查MQTT消息


Retain/Will/Clear Session
（1）Retain能让订阅者在订阅后马上收到发布者的最新一条消息。
（2）Will表示留言，在发布者断线后还能往订阅者传递消息。
（3）Clear Session用于指定服务器是否保留订阅者的已订阅状态。


QoS机制:
 分0、1、和2三个级别的品质设定。
（1）QoS0最多传送一次，不保证信息会送达。
（2）QoS1至少传送一次，保证信息会送达。
（3）QoS2确实传送一次，保证信息会送达。








